<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SERA AI</title>

<!-- Ù…Ø®ØµØµ Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ (PWA + Icons) -->
<!-- Ø³Ù†Ø¶ÙŠÙÙ‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¹Ù†Ø¯ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ -->

<style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Tajawal", system-ui, sans-serif;
    }

    body {
        background: #f5f5f7;
        color: #111827;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 16px;
    }

    .app {
        background: white;
        width: 100%;
        max-width: 780px;
        border-radius: 20px;
        box-shadow: 0 22px 55px rgba(0,0,0,0.15);
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    .header {
        padding: 20px;
        background: #111827;
        color: white;
        font-size: 22px;
        font-weight: bold;
        text-align: center;
    }

    .messages {
        flex: 1;
        padding: 22px;
        overflow-y: auto;
    }

    .msg {
        max-width: 85%;
        padding: 12px 18px;
        border-radius: 14px;
        margin-bottom: 12px;
        font-size: 15px;
        line-height: 1.7;
        white-space: pre-wrap;
    }

    .bot { background: #f1f5f9; align-self: flex-start; }
    .user { background: #111827; color: white; align-self: flex-end; }

    .topics {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        padding: 16px;
    }

    .topic {
        background: white;
        border-radius: 20px;
        border: 1px solid #d1d5db;
        padding: 8px 16px;
        font-size: 14px;
        cursor: pointer;
        transition: 0.2s;
    }

    .topic:hover {
        background: #111827;
        color: white;
    }

    .input-area {
        display: flex;
        padding: 16px;
        gap: 10px;
    }

    input {
        flex: 1;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 12px;
        font-size: 15px;
    }

    button {
        padding: 0 26px;
        background: #111827;
        border: none;
        border-radius: 12px;
        color: white;
        cursor: pointer;
        font-size: 16px;
    }
</style>
</head>

<body>
<div class="app">

    <div class="header">SERA AI</div>

    <div class="messages" id="messages"></div>

    <!-- Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø³Ø±ÙŠØ¹Ø© -->
    <div class="topics" id="topics"></div>

    <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
    <div class="input-area">
        <input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦" />
        <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>

</div>

<script>
const backendURL = "https://sera-ai-backend-qhrd.onrender.com/ask";

const messagesEl = document.getElementById("messages");
const inputEl = document.getElementById("msg");
const topicsEl = document.getElementById("topics");

/* -----------------------------------------------
   ðŸ›’ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø¬Ø§Ù‡Ø²Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø³Ù„Ø©)
   Ø³Ù†Ù…Ù„Ø£Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø³Ø­Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
---------------------------------------------------*/
const PRODUCTS = {
   acne: [],
   pigmentation: [],
   hydration: [],
   pores: [],
   antiaging: [],
   sensitive: []
};

/* Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø³Ø±ÙŠØ¹Ø© */
const quickTopics = [
    "Ø­Ø¨ Ø§Ù„Ø´Ø¨Ø§Ø¨",
    "Ø§Ù„ØªØµØ¨ØºØ§Øª",
    "Ø§Ù„Ù…Ø³Ø§Ù… Ø§Ù„ÙˆØ§Ø³Ø¹Ø©",
    "Ø§Ù„Ø¨Ø´Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø³Ø©",
    "Ø§Ù„Ø¬ÙØ§Ù",
    "Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ø§Ù„Ø¹Ù…Ø±"
];

/* Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© */
function addMessage(text, sender = "bot") {
    const div = document.createElement("div");
    div.className = "msg " + sender;
    div.textContent = text;
    messagesEl.appendChild(div);
    messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ */
function loadTopics() {
    quickTopics.forEach((t) => {
        const btn = document.createElement("div");
        btn.className = "topic";
        btn.textContent = t;
        btn.onclick = () => sendMessage(t);
        topicsEl.appendChild(btn);
    });
}

/* Ø¥Ø±Ø³Ø§Ù„ */
async function sendMessage(custom = null) {
    const text = custom || inputEl.value.trim();
    if (!text) return;

    addMessage(text, "user");
    inputEl.value = "";

    addMessage("â€¦ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„", "bot");

    try {
        const res = await fetch(backendURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: text }),
        });

        const data = await res.json();
        messagesEl.lastChild.remove();

        addMessage(data.reply || "ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø¯.");
    } catch {
        messagesEl.lastChild.remove();
        addMessage("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….");
    }
}

/* Ø¨Ø¯Ø§ÙŠØ© */
addMessage(
    "Ø£Ù‡Ù„Ø§Ù‹ ðŸ‘‹\nØ£Ù†Ø§ SERA AIØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø© ÙˆØ§Ù„Ø´Ø¹Ø± ÙˆØ§Ù„Ø¬Ø³Ù….\nØ§Ø®Ø¨Ø±Ù†ÙŠ Ø¨Ù…Ø´ÙƒÙ„ØªÙƒ Ø£Ùˆ Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰."
);

loadTopics();
</script>

</body>
</html>